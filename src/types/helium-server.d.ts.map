{"version":3,"file":"helium-server.d.ts","sourceRoot":"","sources":["../server/env.ts","../server/get-ip.ts","../server/profile.ts","../server/profile.ts","../server/tasks/index.ts","../server/tasks/index.ts","../server/tasks/index.ts","../server/tasks/index.ts","../server/tasks/index.ts","../server/tasks/index.ts"],"sourcesContent":["import { defineMethod } from \"helium/server\";\n\nexport const getServerEnv = defineMethod(async () => {\n    // Server-side environment variables are accessible via process.env\n    // Both HELIUM_PUBLIC_ prefixed and non-prefixed variables are available here\n    const env: Record<string, string | boolean> = {\n        appName: process.env.HELIUM_PUBLIC_APP_NAME || \"Not set\",\n        apiUrl: process.env.HELIUM_PUBLIC_API_URL || \"Not set\",\n        // Server-only variables (not prefixed with VITE_)\n        databaseUrl: process.env.DATABASE_URL || \"Not set\",\n        hasApiSecret: !!process.env.API_SECRET_KEY,\n    };\n    return env;\n});\n","import { defineMethod } from \"helium/server\";\n\nexport const getIP = defineMethod(async (_args, ctx) => {\n    // Access client IP (extracted based on trustProxyDepth config)\n    console.log(\"Client IP:\", ctx.req.ip);\n\n    // Access headers from the WebSocket upgrade request\n    console.log(\"User-Agent:\", ctx.req.headers[\"user-agent\"]);\n\n    // Access other request metadata\n    console.log(\"Request URL:\", ctx.req.url);\n    console.log(\"Request Method:\", ctx.req.method);\n\n    return {\n        ip: ctx.req.ip,\n        headers: ctx.req.headers,\n        url: ctx.req.url,\n        method: ctx.req.method,\n    };\n});\n","import { defineMethod } from \"helium/server\";\n\nimport { Profile } from \"../types/profile\";\nimport { ProfileModel } from \"./models/Profile\";\n\nexport const getProfile = defineMethod(async (_args: null, _ctx) => {\n    // Get or create the profile (single profile in this example)\n    let profile = await ProfileModel.findOne();\n\n    if (!profile) {\n        // Create a default profile if none exists\n        profile = await ProfileModel.create({\n            name: \"John Doe\",\n            email: \"john@example.com\",\n        });\n    }\n\n    return {\n        id: profile._id.toString(),\n        name: profile.name,\n        email: profile.email,\n    } as Profile;\n});\n\nexport const updateProfile = defineMethod(async (args: { name?: string; email?: string }) => {\n    // Get or create the profile\n    let profile = await ProfileModel.findOne();\n\n    if (!profile) {\n        profile = await ProfileModel.create({\n            name: args.name || \"John Doe\",\n            email: args.email || \"john@example.com\",\n        });\n    } else {\n        // Update the profile\n        if (args.name !== undefined) {\n            profile.name = args.name;\n        }\n        if (args.email !== undefined) {\n            profile.email = args.email;\n        }\n        await profile.save();\n    }\n\n    return {\n        id: profile._id.toString(),\n        name: profile.name,\n        email: profile.email,\n    } as Profile;\n});\n","import { defineMethod } from \"helium/server\";\n\nimport { Profile } from \"../types/profile\";\nimport { ProfileModel } from \"./models/Profile\";\n\nexport const getProfile = defineMethod(async (_args: null, _ctx) => {\n    // Get or create the profile (single profile in this example)\n    let profile = await ProfileModel.findOne();\n\n    if (!profile) {\n        // Create a default profile if none exists\n        profile = await ProfileModel.create({\n            name: \"John Doe\",\n            email: \"john@example.com\",\n        });\n    }\n\n    return {\n        id: profile._id.toString(),\n        name: profile.name,\n        email: profile.email,\n    } as Profile;\n});\n\nexport const updateProfile = defineMethod(async (args: { name?: string; email?: string }) => {\n    // Get or create the profile\n    let profile = await ProfileModel.findOne();\n\n    if (!profile) {\n        profile = await ProfileModel.create({\n            name: args.name || \"John Doe\",\n            email: args.email || \"john@example.com\",\n        });\n    } else {\n        // Update the profile\n        if (args.name !== undefined) {\n            profile.name = args.name;\n        }\n        if (args.email !== undefined) {\n            profile.email = args.email;\n        }\n        await profile.save();\n    }\n\n    return {\n        id: profile._id.toString(),\n        name: profile.name,\n        email: profile.email,\n    } as Profile;\n});\n","import { defineHTTPRequest, defineMethod } from \"helium/server\";\n\nimport { Task } from \"../../types/task\";\nimport { TaskModel } from \"../models/Task\";\n\nexport const getTasks = defineMethod(async (args?: { status?: string }) => {\n    const filter = args?.status ? { status: args.status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    return tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n});\n\nexport const getTasksByHttp = defineHTTPRequest(\"GET\", \"/api/get-tasks\", async (req) => {\n    const { status } = req.query || undefined;\n    const filter = status ? { status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    const response = tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n\n    return response;\n});\n\nexport const getTaskById = defineMethod(async (args: { id: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return null;\n    }\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const updateTaskStatus = defineMethod(async (args: { id: string; status: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    task.status = args.status as \"open\" | \"done\";\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n\nexport const createTask = defineMethod(async (args: { name: string }) => {\n    const task = await TaskModel.create({\n        name: args.name,\n        status: \"open\",\n    });\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const deleteTask = defineMethod(async (args: { id: string }) => {\n    const result = await TaskModel.findByIdAndDelete(args.id);\n\n    if (result) {\n        return { success: true };\n    } else {\n        return { success: false, message: \"Task not found\" };\n    }\n});\n\nexport const editTask = defineMethod(async (args: { id: string; name?: string; status?: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    if (args.name !== undefined) {\n        task.name = args.name;\n    }\n    if (args.status !== undefined) {\n        task.status = args.status as \"open\" | \"done\";\n    }\n\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            _id: task._id,\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n","import { defineHTTPRequest, defineMethod } from \"helium/server\";\n\nimport { Task } from \"../../types/task\";\nimport { TaskModel } from \"../models/Task\";\n\nexport const getTasks = defineMethod(async (args?: { status?: string }) => {\n    const filter = args?.status ? { status: args.status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    return tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n});\n\nexport const getTasksByHttp = defineHTTPRequest(\"GET\", \"/api/get-tasks\", async (req) => {\n    const { status } = req.query || undefined;\n    const filter = status ? { status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    const response = tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n\n    return response;\n});\n\nexport const getTaskById = defineMethod(async (args: { id: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return null;\n    }\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const updateTaskStatus = defineMethod(async (args: { id: string; status: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    task.status = args.status as \"open\" | \"done\";\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n\nexport const createTask = defineMethod(async (args: { name: string }) => {\n    const task = await TaskModel.create({\n        name: args.name,\n        status: \"open\",\n    });\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const deleteTask = defineMethod(async (args: { id: string }) => {\n    const result = await TaskModel.findByIdAndDelete(args.id);\n\n    if (result) {\n        return { success: true };\n    } else {\n        return { success: false, message: \"Task not found\" };\n    }\n});\n\nexport const editTask = defineMethod(async (args: { id: string; name?: string; status?: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    if (args.name !== undefined) {\n        task.name = args.name;\n    }\n    if (args.status !== undefined) {\n        task.status = args.status as \"open\" | \"done\";\n    }\n\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            _id: task._id,\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n","import { defineHTTPRequest, defineMethod } from \"helium/server\";\n\nimport { Task } from \"../../types/task\";\nimport { TaskModel } from \"../models/Task\";\n\nexport const getTasks = defineMethod(async (args?: { status?: string }) => {\n    const filter = args?.status ? { status: args.status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    return tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n});\n\nexport const getTasksByHttp = defineHTTPRequest(\"GET\", \"/api/get-tasks\", async (req) => {\n    const { status } = req.query || undefined;\n    const filter = status ? { status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    const response = tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n\n    return response;\n});\n\nexport const getTaskById = defineMethod(async (args: { id: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return null;\n    }\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const updateTaskStatus = defineMethod(async (args: { id: string; status: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    task.status = args.status as \"open\" | \"done\";\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n\nexport const createTask = defineMethod(async (args: { name: string }) => {\n    const task = await TaskModel.create({\n        name: args.name,\n        status: \"open\",\n    });\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const deleteTask = defineMethod(async (args: { id: string }) => {\n    const result = await TaskModel.findByIdAndDelete(args.id);\n\n    if (result) {\n        return { success: true };\n    } else {\n        return { success: false, message: \"Task not found\" };\n    }\n});\n\nexport const editTask = defineMethod(async (args: { id: string; name?: string; status?: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    if (args.name !== undefined) {\n        task.name = args.name;\n    }\n    if (args.status !== undefined) {\n        task.status = args.status as \"open\" | \"done\";\n    }\n\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            _id: task._id,\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n","import { defineHTTPRequest, defineMethod } from \"helium/server\";\n\nimport { Task } from \"../../types/task\";\nimport { TaskModel } from \"../models/Task\";\n\nexport const getTasks = defineMethod(async (args?: { status?: string }) => {\n    const filter = args?.status ? { status: args.status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    return tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n});\n\nexport const getTasksByHttp = defineHTTPRequest(\"GET\", \"/api/get-tasks\", async (req) => {\n    const { status } = req.query || undefined;\n    const filter = status ? { status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    const response = tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n\n    return response;\n});\n\nexport const getTaskById = defineMethod(async (args: { id: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return null;\n    }\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const updateTaskStatus = defineMethod(async (args: { id: string; status: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    task.status = args.status as \"open\" | \"done\";\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n\nexport const createTask = defineMethod(async (args: { name: string }) => {\n    const task = await TaskModel.create({\n        name: args.name,\n        status: \"open\",\n    });\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const deleteTask = defineMethod(async (args: { id: string }) => {\n    const result = await TaskModel.findByIdAndDelete(args.id);\n\n    if (result) {\n        return { success: true };\n    } else {\n        return { success: false, message: \"Task not found\" };\n    }\n});\n\nexport const editTask = defineMethod(async (args: { id: string; name?: string; status?: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    if (args.name !== undefined) {\n        task.name = args.name;\n    }\n    if (args.status !== undefined) {\n        task.status = args.status as \"open\" | \"done\";\n    }\n\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            _id: task._id,\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n","import { defineHTTPRequest, defineMethod } from \"helium/server\";\n\nimport { Task } from \"../../types/task\";\nimport { TaskModel } from \"../models/Task\";\n\nexport const getTasks = defineMethod(async (args?: { status?: string }) => {\n    const filter = args?.status ? { status: args.status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    return tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n});\n\nexport const getTasksByHttp = defineHTTPRequest(\"GET\", \"/api/get-tasks\", async (req) => {\n    const { status } = req.query || undefined;\n    const filter = status ? { status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    const response = tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n\n    return response;\n});\n\nexport const getTaskById = defineMethod(async (args: { id: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return null;\n    }\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const updateTaskStatus = defineMethod(async (args: { id: string; status: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    task.status = args.status as \"open\" | \"done\";\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n\nexport const createTask = defineMethod(async (args: { name: string }) => {\n    const task = await TaskModel.create({\n        name: args.name,\n        status: \"open\",\n    });\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const deleteTask = defineMethod(async (args: { id: string }) => {\n    const result = await TaskModel.findByIdAndDelete(args.id);\n\n    if (result) {\n        return { success: true };\n    } else {\n        return { success: false, message: \"Task not found\" };\n    }\n});\n\nexport const editTask = defineMethod(async (args: { id: string; name?: string; status?: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    if (args.name !== undefined) {\n        task.name = args.name;\n    }\n    if (args.status !== undefined) {\n        task.status = args.status as \"open\" | \"done\";\n    }\n\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            _id: task._id,\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n","import { defineHTTPRequest, defineMethod } from \"helium/server\";\n\nimport { Task } from \"../../types/task\";\nimport { TaskModel } from \"../models/Task\";\n\nexport const getTasks = defineMethod(async (args?: { status?: string }) => {\n    const filter = args?.status ? { status: args.status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    return tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n});\n\nexport const getTasksByHttp = defineHTTPRequest(\"GET\", \"/api/get-tasks\", async (req) => {\n    const { status } = req.query || undefined;\n    const filter = status ? { status } : {};\n    const tasks = await TaskModel.find(filter).sort({ createdAt: -1 }).lean();\n\n    const response = tasks.map((task) => ({\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    })) as Task[];\n\n    return response;\n});\n\nexport const getTaskById = defineMethod(async (args: { id: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return null;\n    }\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const updateTaskStatus = defineMethod(async (args: { id: string; status: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    task.status = args.status as \"open\" | \"done\";\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n\nexport const createTask = defineMethod(async (args: { name: string }) => {\n    const task = await TaskModel.create({\n        name: args.name,\n        status: \"open\",\n    });\n\n    return {\n        id: task._id.toString(),\n        name: task.name,\n        status: task.status,\n    } as Task;\n});\n\nexport const deleteTask = defineMethod(async (args: { id: string }) => {\n    const result = await TaskModel.findByIdAndDelete(args.id);\n\n    if (result) {\n        return { success: true };\n    } else {\n        return { success: false, message: \"Task not found\" };\n    }\n});\n\nexport const editTask = defineMethod(async (args: { id: string; name?: string; status?: string }) => {\n    const task = await TaskModel.findById(args.id);\n\n    if (!task) {\n        return { success: false, message: \"Task not found\" };\n    }\n\n    if (args.name !== undefined) {\n        task.name = args.name;\n    }\n    if (args.status !== undefined) {\n        task.status = args.status as \"open\" | \"done\";\n    }\n\n    await task.save();\n\n    return {\n        success: true,\n        task: {\n            _id: task._id,\n            id: task._id.toString(),\n            name: task.name,\n            status: task.status,\n        } as Task,\n    };\n});\n"],"names":["getServerEnv","getIP","getProfile","updateProfile","getTasks","getTaskById","updateTaskStatus","createTask","deleteTask","editTask"],"mappings":";;;;;;;;;;;;;;;;;AAEAA;;;;ACAAC;;;;ACGAC;;;;ACmBAC;;;;ACnBAC;;;;ACyBAC;;;;ACcAC;;;;ACoBAC;;;;ACaAC;;;;ACUAC"}